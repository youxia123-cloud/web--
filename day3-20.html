<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Async ball</title>
    <style>
        .ball1 {
            width: 50px;
            height: 50px;
            background-color: aqua;
            border-radius: 50%;
            transform: translateX(0);
        }
        
        .ball2 {
            width: 50px;
            height: 50px;
            background-color: darkorange;
            border-radius: 50%;
            transform: translateX(0);
        }
        
        .ball3 {
            width: 50px;
            height: 50px;
            background-color: slategrey;
            border-radius: 50%;
            transform: translateX(0);
        }
    </style>
</head>

<body>
    <div class="ball1"></div>
    <div class="ball2"></div>
    <div class="ball3"></div>
    <script>
        const ball1 = document.querySelector('.ball1')
        const ball2 = document.querySelector('.ball2')
        const ball3 = document.querySelector('.ball3')
            // demo 使用时只把相应注释取消就行

        // callback 用法的 demo
        /*   function move(ball, target, cb) {
            // TODO
            let distance = 0;
            let timer1 = setInterval(() => {
                distance += 10;
                ball.style.transform = `translateX(${distance+'px'})`;
                if (distance >= target) {
                    clearInterval(timer1);
                    //开启第二个定时器，第二个圆开始运动
                    let distance = 0;
                    let timer2 = setInterval(() => {
                        distance += 10;
                        ball2.style.transform = `translateX(${distance+'px'})`;
                        if (distance >= target) {
                            clearInterval(timer2);
                            cb();
                        };
                    }, 70)
                };
            }, 70)
        }
        move(ball1, 100, () => {
            let distance = 0;
            let timer3 = setInterval(() => {
                distance += 10;
                ball3.style.transform = `translateX(${distance+'px'})`;
                if (distance >= 100) {
                    clearInterval(timer3);
                };
            }, 70)
        });
 */








        // Promise 用法的 demo
        /*   function move1(ball, target) {
              // TODO
              return new Promise(function(resolve, reject) {
                  function move2() {
                      //让小球运动起来
                      setTimeout(() => {
                          let distance = ball.style.transform.replace(/[^0-9]/ig, "");
                          if (distance == target) {
                              resolve()
                              return;
                          } else {
                              if (distance < target) {
                                  distance++;
                              };
                              if (distance > target) {
                                  distance--;
                              };
                              ball.style.transform = `translateX(${distance+'px'})`;
                              move2();
                          }
                      }, 70);
                  }
                  move2();
              });
          }
          move1(ball1, 100).then(function() {
              return move1(ball2, 100);
          }).then(function() {
              return move1(ball3, 100)
          }) */

        // async/await 用法的 demo
        /*     async function go() {
                // TODO
                function move2(ball, target, cb) {
                    //小球运动
                    let timer = setInterval(() => {

                        let distance = ball.style.transform.replace(/[^0-9]/ig, "");
                        if (distance == target) {
                            cb();
                            clearInterval(timer);
                        } else {
                            if (distance < target) {
                                distance++;
                            };
                            if (distance > target) {
                                distance--;
                            };
                            ball.style.transform = `translateX(${distance+'px'})`;
                        }
                    }, 60);
                };
                await new Promise((resolve, reject) => {
                    move2(ball1, 100, () => {
                        resolve();
                    })
                });
                await new Promise((resolve, reject) => {
                    move2(ball2, 100, () => {
                        resolve();
                    })
                });
                await new Promise((resolve, reject) => {
                    move2(ball3, 100, () => {
                        resolve();
                    })
                });
            };
            go(); */
    </script>
</body>

</html>